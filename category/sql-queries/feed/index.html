<?xml version="1.0" encoding="UTF-8"?> <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:slash="http://purl.org/rss/1.0/modules/slash/" ><channel><title>PleskHacker &#187; MySQL Queries</title> <atom:link href="http://pleskhacker.com/category/sql-queries/feed/" rel="self" type="application/rss+xml" /><link>http://pleskhacker.com</link> <description>Detailed documentation of the Plesk database</description> <lastBuildDate>Thu, 03 Jun 2010 13:00:52 +0000</lastBuildDate> <language>en-US</language> <sy:updatePeriod>hourly</sy:updatePeriod> <sy:updateFrequency>1</sy:updateFrequency> <generator>http://wordpress.org/?v=3.4.2</generator> <item><title>Enable user management of spam filtering</title><link>http://pleskhacker.com/sql-queries/enable-user-management-of-spam-filtering/</link> <comments>http://pleskhacker.com/sql-queries/enable-user-management-of-spam-filtering/#comments</comments> <pubDate>Tue, 09 Dec 2008 01:24:44 +0000</pubDate> <dc:creator>major</dc:creator> <category><![CDATA[Mail Queries]]></category> <category><![CDATA[MySQL Queries]]></category> <category><![CDATA[mail]]></category> <category><![CDATA[permissions]]></category> <category><![CDATA[spamassassin]]></category><guid isPermaLink="false">http://pleskhacker.com/?p=313</guid> <description><![CDATA[If you want to enable user-level management of spam filters in Plesk for all users that have spamassassin enabled, you can use this query: INSERT INTO Permissions &#40;id,permission,value&#41; SELECT perm_id,'manage_spamfilter',true FROM mail WHERE spamfilter = true; Thanks to Ortak ve Şirket Müdürü for the submission!]]></description> <content:encoded><![CDATA[<p>If you want to enable user-level management of spam filters in Plesk for all users that have spamassassin enabled, you can use this query:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">INSERT</span> <span style="color: #990099; font-weight: bold;">INTO</span> Permissions <span style="color: #FF00FF;">&#40;</span>id<span style="color: #000033;">,</span>permission<span style="color: #000033;">,</span><span style="color: #990099; font-weight: bold;">value</span><span style="color: #FF00FF;">&#41;</span> 
<span style="color: #990099; font-weight: bold;">SELECT</span> perm_id<span style="color: #000033;">,</span><span style="color: #008000;">'manage<span style="color: #008080; font-weight: bold;">_</span>spamfilter'</span><span style="color: #000033;">,</span><span style="color: #9900FF; font-weight: bold;">true</span> <span style="color: #990099; font-weight: bold;">FROM</span> mail <span style="color: #990099; font-weight: bold;">WHERE</span> spamfilter <span style="color: #CC0099;">=</span> <span style="color: #9900FF; font-weight: bold;">true</span><span style="color: #000033;">;</span></pre></td></tr></table></div><p>Thanks to Ortak ve Şirket Müdürü for the submission!</p> ]]></content:encoded> <wfw:commentRss>http://pleskhacker.com/sql-queries/enable-user-management-of-spam-filtering/feed/</wfw:commentRss> <slash:comments>0</slash:comments> </item> <item><title>Find all databases and login credentials</title><link>http://pleskhacker.com/sql-queries/find-all-databases-and-login-credentials/</link> <comments>http://pleskhacker.com/sql-queries/find-all-databases-and-login-credentials/#comments</comments> <pubDate>Tue, 09 Dec 2008 01:18:53 +0000</pubDate> <dc:creator>major</dc:creator> <category><![CDATA[Database Queries]]></category> <category><![CDATA[MySQL Queries]]></category> <category><![CDATA[accounts]]></category> <category><![CDATA[databases]]></category> <category><![CDATA[data_bases]]></category> <category><![CDATA[domains]]></category><guid isPermaLink="false">http://pleskhacker.com/?p=308</guid> <description><![CDATA[If you need to list all of the MySQL databases managed by Plesk along with their corresponding domains and login credentials, you can use this handy query: SELECT domains.name AS domain_name, data_bases.name AS database_name, db_users.login, accounts.password FROM data_bases, db_users, domains, accounts WHERE data_bases.dom_id = domains.id AND db_users.db_id = data_bases.id AND db_users.account_id = accounts.id ORDER BY [...]]]></description> <content:encoded><![CDATA[<p>If you need to list all of the MySQL databases managed by Plesk along with their corresponding domains and login credentials, you can use this handy query:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">SELECT</span> domains.name <span style="color: #990099; font-weight: bold;">AS</span> domain_name<span style="color: #000033;">,</span>
data_bases.name <span style="color: #990099; font-weight: bold;">AS</span> database_name<span style="color: #000033;">,</span> db_users.login<span style="color: #000033;">,</span> accounts.<span style="color: #000099;">password</span>
<span style="color: #990099; font-weight: bold;">FROM</span> data_bases<span style="color: #000033;">,</span> db_users<span style="color: #000033;">,</span> domains<span style="color: #000033;">,</span> accounts
<span style="color: #990099; font-weight: bold;">WHERE</span> data_bases.dom_id <span style="color: #CC0099;">=</span> domains.id
<span style="color: #CC0099; font-weight: bold;">AND</span> db_users.db_id <span style="color: #CC0099;">=</span> data_bases.id
<span style="color: #CC0099; font-weight: bold;">AND</span> db_users.account_id <span style="color: #CC0099;">=</span> accounts.id
<span style="color: #990099; font-weight: bold;">ORDER BY</span> domain_name<span style="color: #000033;">;</span></pre></td></tr></table></div><p>Thanks to Juan Carlos Lopez for the suggestion!</p> ]]></content:encoded> <wfw:commentRss>http://pleskhacker.com/sql-queries/find-all-databases-and-login-credentials/feed/</wfw:commentRss> <slash:comments>0</slash:comments> </item> <item><title>Find Plesk domains exceeding quotas</title><link>http://pleskhacker.com/sql-queries/find-domains-over-quota-in-plesk/</link> <comments>http://pleskhacker.com/sql-queries/find-domains-over-quota-in-plesk/#comments</comments> <pubDate>Fri, 26 Sep 2008 03:31:25 +0000</pubDate> <dc:creator>major</dc:creator> <category><![CDATA[Mail Queries]]></category> <category><![CDATA[MySQL Queries]]></category> <category><![CDATA[Web Queries]]></category> <category><![CDATA[domains]]></category> <category><![CDATA[limits]]></category> <category><![CDATA[quota]]></category><guid isPermaLink="false">http://pleskhacker.com/?p=299</guid> <description><![CDATA[Find domains that are over quota on disk space in Plesk: SELECT domains.name, domains.real_size, Limits.value FROM domains, Limits WHERE domains.limits_id = Limits.id AND domains.real_size &#62; Limits.value AND limit_name = 'disk_space' AND Limits.value != -1 ORDER BY domains.name ASC;]]></description> <content:encoded><![CDATA[<p>Find domains that are over quota on disk space in Plesk:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">SELECT</span> domains.name<span style="color: #000033;">,</span> domains.real_size<span style="color: #000033;">,</span> Limits.<span style="color: #990099; font-weight: bold;">value</span>
<span style="color: #990099; font-weight: bold;">FROM</span> domains<span style="color: #000033;">,</span> Limits
<span style="color: #990099; font-weight: bold;">WHERE</span> domains.limits_id <span style="color: #CC0099;">=</span> Limits.id
<span style="color: #CC0099; font-weight: bold;">AND</span> domains.real_size <span style="color: #CC0099;">&gt;</span> Limits.<span style="color: #990099; font-weight: bold;">value</span>
<span style="color: #CC0099; font-weight: bold;">AND</span> limit_name <span style="color: #CC0099;">=</span> <span style="color: #008000;">'disk<span style="color: #008080; font-weight: bold;">_</span>space'</span>
<span style="color: #CC0099; font-weight: bold;">AND</span> Limits.<span style="color: #990099; font-weight: bold;">value</span> <span style="color: #CC0099;">!=</span> <span style="color: #CC0099;">-</span><span style="color: #008080;">1</span>
<span style="color: #990099; font-weight: bold;">ORDER BY</span> domains.name <span style="color: #990099; font-weight: bold;">ASC</span><span style="color: #000033;">;</span></pre></td></tr></table></div>]]></content:encoded> <wfw:commentRss>http://pleskhacker.com/sql-queries/find-domains-over-quota-in-plesk/feed/</wfw:commentRss> <slash:comments>0</slash:comments> </item> <item><title>Get Plesk FTP account passwords</title><link>http://pleskhacker.com/sql-queries/get-ftp-account-passwords/</link> <comments>http://pleskhacker.com/sql-queries/get-ftp-account-passwords/#comments</comments> <pubDate>Fri, 26 Sep 2008 03:21:56 +0000</pubDate> <dc:creator>major</dc:creator> <category><![CDATA[MySQL Queries]]></category> <category><![CDATA[Web Queries]]></category> <category><![CDATA[accounts]]></category> <category><![CDATA[sys_users]]></category><guid isPermaLink="false">http://pleskhacker.com/?p=294</guid> <description><![CDATA[Display all of the FTP usernames and passwords in Plesk: SELECT REPLACE&#40;sys_users.home,'/home/httpd/vhosts/',''&#41; AS domain, sys_users.login,accounts.password FROM sys_users LEFT JOIN accounts on sys_users.account_id=accounts.id ORDER BY sys_users.home ASC;]]></description> <content:encoded><![CDATA[<p>Display all of the FTP usernames and passwords in Plesk:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">SELECT</span> <span style="color: #000099;">REPLACE</span><span style="color: #FF00FF;">&#40;</span>sys_users.home<span style="color: #000033;">,</span><span style="color: #008000;">'/home/httpd/vhosts/'</span><span style="color: #000033;">,</span><span style="color: #008000;">''</span><span style="color: #FF00FF;">&#41;</span> <span style="color: #990099; font-weight: bold;">AS</span> domain<span style="color: #000033;">,</span>
sys_users.login<span style="color: #000033;">,</span>accounts.<span style="color: #000099;">password</span> <span style="color: #990099; font-weight: bold;">FROM</span> sys_users
<span style="color: #000099;">LEFT</span> <span style="color: #990099; font-weight: bold;">JOIN</span> accounts <span style="color: #990099; font-weight: bold;">on</span> sys_users.account_id<span style="color: #CC0099;">=</span>accounts.id
<span style="color: #990099; font-weight: bold;">ORDER BY</span> sys_users.home <span style="color: #990099; font-weight: bold;">ASC</span><span style="color: #000033;">;</span></pre></td></tr></table></div>]]></content:encoded> <wfw:commentRss>http://pleskhacker.com/sql-queries/get-ftp-account-passwords/feed/</wfw:commentRss> <slash:comments>0</slash:comments> </item> <item><title>Get e-mail account passwords</title><link>http://pleskhacker.com/sql-queries/get-e-mail-account-passwords/</link> <comments>http://pleskhacker.com/sql-queries/get-e-mail-account-passwords/#comments</comments> <pubDate>Fri, 26 Sep 2008 03:13:15 +0000</pubDate> <dc:creator>major</dc:creator> <category><![CDATA[Mail Queries]]></category> <category><![CDATA[MySQL Queries]]></category> <category><![CDATA[accounts]]></category> <category><![CDATA[domains]]></category> <category><![CDATA[domainservices]]></category> <category><![CDATA[mail]]></category> <category><![CDATA[parameters]]></category><guid isPermaLink="false">http://pleskhacker.com/?p=286</guid> <description><![CDATA[Get all e-mail account passwords: SELECT CONCAT_WS&#40;'@',mail.mail_name,domains.name&#41;,accounts.password FROM domains,mail,accounts WHERE domains.id=mail.dom_id AND accounts.id=mail.account_id ORDER BY domains.name ASC,mail.mail_name ASC; Get e-mail account passwords that are made up of only letters: SELECT CONCAT_WS&#40;'@',mail.mail_name,domains.name&#41;,accounts.password FROM domains,mail,accounts WHERE domains.id=mail.dom_id AND accounts.id=mail.account_id AND accounts.password RLIKE BINARY '^[a-z]+$' ORDER BY domains.name ASC,mail.mail_name ASC; Get e-mail account passwords that are made up [...]]]></description> <content:encoded><![CDATA[<p>Get all e-mail account passwords:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">SELECT</span> <span style="color: #000099;">CONCAT_WS</span><span style="color: #FF00FF;">&#40;</span><span style="color: #008000;">'@'</span><span style="color: #000033;">,</span>mail.mail_name<span style="color: #000033;">,</span>domains.name<span style="color: #FF00FF;">&#41;</span><span style="color: #000033;">,</span>accounts.<span style="color: #000099;">password</span>
<span style="color: #990099; font-weight: bold;">FROM</span> domains<span style="color: #000033;">,</span>mail<span style="color: #000033;">,</span>accounts 
<span style="color: #990099; font-weight: bold;">WHERE</span> domains.id<span style="color: #CC0099;">=</span>mail.dom_id <span style="color: #CC0099; font-weight: bold;">AND</span> accounts.id<span style="color: #CC0099;">=</span>mail.account_id 
<span style="color: #990099; font-weight: bold;">ORDER BY</span> domains.name <span style="color: #990099; font-weight: bold;">ASC</span><span style="color: #000033;">,</span>mail.mail_name <span style="color: #990099; font-weight: bold;">ASC</span><span style="color: #000033;">;</span></pre></td></tr></table></div><pre></pre><p>Get e-mail account passwords that are made up of only letters:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">SELECT</span> <span style="color: #000099;">CONCAT_WS</span><span style="color: #FF00FF;">&#40;</span><span style="color: #008000;">'@'</span><span style="color: #000033;">,</span>mail.mail_name<span style="color: #000033;">,</span>domains.name<span style="color: #FF00FF;">&#41;</span><span style="color: #000033;">,</span>accounts.<span style="color: #000099;">password</span>
<span style="color: #990099; font-weight: bold;">FROM</span> domains<span style="color: #000033;">,</span>mail<span style="color: #000033;">,</span>accounts
<span style="color: #990099; font-weight: bold;">WHERE</span> domains.id<span style="color: #CC0099;">=</span>mail.dom_id <span style="color: #CC0099; font-weight: bold;">AND</span> accounts.id<span style="color: #CC0099;">=</span>mail.account_id 
<span style="color: #CC0099; font-weight: bold;">AND</span> accounts.<span style="color: #000099;">password</span> <span style="color: #CC0099; font-weight: bold;">RLIKE</span> <span style="color: #990099; font-weight: bold;">BINARY</span> <span style="color: #008000;">'^[a-z]+$'</span>
<span style="color: #990099; font-weight: bold;">ORDER BY</span> domains.name <span style="color: #990099; font-weight: bold;">ASC</span><span style="color: #000033;">,</span>mail.mail_name <span style="color: #990099; font-weight: bold;">ASC</span><span style="color: #000033;">;</span></pre></td></tr></table></div><p>Get e-mail account passwords that are made up of only letters</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">SELECT</span> <span style="color: #000099;">CONCAT_WS</span><span style="color: #FF00FF;">&#40;</span><span style="color: #008000;">'@'</span><span style="color: #000033;">,</span>mail.mail_name<span style="color: #000033;">,</span>domains.name<span style="color: #FF00FF;">&#41;</span><span style="color: #000033;">,</span>accounts.<span style="color: #000099;">password</span>
<span style="color: #990099; font-weight: bold;">FROM</span> domains<span style="color: #000033;">,</span>mail<span style="color: #000033;">,</span>accounts
<span style="color: #990099; font-weight: bold;">WHERE</span> domains.id<span style="color: #CC0099;">=</span>mail.dom_id <span style="color: #CC0099; font-weight: bold;">AND</span> accounts.id<span style="color: #CC0099;">=</span>mail.account_id 
<span style="color: #CC0099; font-weight: bold;">AND</span> accounts.<span style="color: #000099;">password</span> <span style="color: #CC0099; font-weight: bold;">RLIKE</span>  <span style="color: #008000;">'^[0-9]+$'</span>
<span style="color: #990099; font-weight: bold;">ORDER BY</span> domains.name <span style="color: #990099; font-weight: bold;">ASC</span><span style="color: #000033;">,</span>mail.mail_name <span style="color: #990099; font-weight: bold;">ASC</span><span style="color: #000033;">;</span></pre></td></tr></table></div><p>Find domains that are using catch-all accounts:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">SELECT</span> d.name <span style="color: #990099; font-weight: bold;">AS</span> domains<span style="color: #000033;">,</span> p.<span style="color: #990099; font-weight: bold;">value</span> <span style="color: #990099; font-weight: bold;">AS</span> catchall_address
<span style="color: #990099; font-weight: bold;">FROM</span> Parameters p<span style="color: #000033;">,</span> DomainServices ds<span style="color: #000033;">,</span> domains d
<span style="color: #990099; font-weight: bold;">WHERE</span> d.id <span style="color: #CC0099;">=</span> ds.dom_id <span style="color: #CC0099; font-weight: bold;">AND</span> ds.parameters_id <span style="color: #CC0099;">=</span> p.id <span style="color: #CC0099; font-weight: bold;">AND</span> p.parameter <span style="color: #CC0099;">=</span> <span style="color: #008000;">'catch<span style="color: #008080; font-weight: bold;">_</span>addr'</span>
<span style="color: #990099; font-weight: bold;">ORDER BY</span> d.name</pre></td></tr></table></div>]]></content:encoded> <wfw:commentRss>http://pleskhacker.com/sql-queries/get-e-mail-account-passwords/feed/</wfw:commentRss> <slash:comments>0</slash:comments> </item> <item><title>Add SpamAssassin filtering for all Plesk users</title><link>http://pleskhacker.com/sql-queries/add-spam-filtering-for-all-plesk-users/</link> <comments>http://pleskhacker.com/sql-queries/add-spam-filtering-for-all-plesk-users/#comments</comments> <pubDate>Fri, 26 Sep 2008 03:10:29 +0000</pubDate> <dc:creator>major</dc:creator> <category><![CDATA[Mail Queries]]></category> <category><![CDATA[MySQL Queries]]></category> <category><![CDATA[mail]]></category> <category><![CDATA[spam]]></category><guid isPermaLink="false">http://pleskhacker.com/?p=282</guid> <description><![CDATA[Enable SpamAssassin for all domains in Plesk: UPDATE mail SET spamfilter = 'true' WHERE postbox = 'true'; Rewrite the mail configuration files: /usr/local/psa/admin/bin/mchk --with-spam]]></description> <content:encoded><![CDATA[<p>Enable SpamAssassin for all domains in Plesk:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">UPDATE</span> mail <span style="color: #990099; font-weight: bold;">SET</span> spamfilter <span style="color: #CC0099;">=</span> <span style="color: #008000;">'true'</span> <span style="color: #990099; font-weight: bold;">WHERE</span> postbox <span style="color: #CC0099;">=</span> <span style="color: #008000;">'true'</span><span style="color: #000033;">;</span></pre></td></tr></table></div><p>Rewrite the mail configuration files:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="html" style="font-family:monospace;">/usr/local/psa/admin/bin/mchk --with-spam</pre></td></tr></table></div>]]></content:encoded> <wfw:commentRss>http://pleskhacker.com/sql-queries/add-spam-filtering-for-all-plesk-users/feed/</wfw:commentRss> <slash:comments>0</slash:comments> </item> <item><title>Enable piped logs in Apache</title><link>http://pleskhacker.com/sql-queries/enable-piped-logs-in-apache/</link> <comments>http://pleskhacker.com/sql-queries/enable-piped-logs-in-apache/#comments</comments> <pubDate>Fri, 26 Sep 2008 02:56:20 +0000</pubDate> <dc:creator>major</dc:creator> <category><![CDATA[MySQL Queries]]></category> <category><![CDATA[Web Queries]]></category> <category><![CDATA[apache]]></category> <category><![CDATA[misc]]></category> <category><![CDATA[piped logs]]></category><guid isPermaLink="false">http://pleskhacker.com/?p=271</guid> <description><![CDATA[Run the following MySQL query: REPLACE INTO psa.misc &#40;param,val&#41; VALUES &#40;'apache_pipelog', 'true'&#41;; Rebuild the Apache configuration files: /usr/local/psa/admin/sbin/websrvmng -av Restart Apache: /etc/init.d/httpd restart]]></description> <content:encoded><![CDATA[<p>Run the following MySQL query:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="mysql" style="font-family:monospace;"><span style="color: #990099; font-weight: bold;">REPLACE</span> <span style="color: #990099; font-weight: bold;">INTO</span> psa.misc <span style="color: #FF00FF;">&#40;</span>param<span style="color: #000033;">,</span>val<span style="color: #FF00FF;">&#41;</span> <span style="color: #990099; font-weight: bold;">VALUES</span> <span style="color: #FF00FF;">&#40;</span><span style="color: #008000;">'apache<span style="color: #008080; font-weight: bold;">_</span>pipelog'</span><span style="color: #000033;">,</span> <span style="color: #008000;">'true'</span><span style="color: #FF00FF;">&#41;</span><span style="color: #000033;">;</span></pre></td></tr></table></div><p>Rebuild the Apache configuration files:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="html" style="font-family:monospace;">/usr/local/psa/admin/sbin/websrvmng -av</pre></td></tr></table></div><p>Restart Apache:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="html" style="font-family:monospace;">/etc/init.d/httpd restart</pre></td></tr></table></div>]]></content:encoded> <wfw:commentRss>http://pleskhacker.com/sql-queries/enable-piped-logs-in-apache/feed/</wfw:commentRss> <slash:comments>0</slash:comments> </item> </channel> </rss>
<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Minified using disk: basic
Page Caching using disk: basic
Database Caching using disk: basic
Object Caching 524/626 objects using disk: basic

Served from: pleskhacker.com @ 2012-10-01 22:36:54 -->